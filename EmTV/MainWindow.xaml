<Window
    x:Class="EmTV.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="EmTV">

    <Grid x:Name="Root">

        <!-- Styles -->
        <Grid.Resources>
            <!-- Emoji playlist buttons (sized to fit the 360px left column) -->
            <Style x:Key="EmojiBtn" TargetType="Button">
                <Setter Property="Width" Value="48"/>
                <Setter Property="Height" Value="52"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="CornerRadius" Value="10"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="FontFamily" Value="Segoe UI Emoji"/>
                <Setter Property="FontSize" Value="28"/>
            </Style>
        </Grid.Resources>

        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftCol" Width="360"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left pane -->
        <Grid x:Name="LeftPane" Padding="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Channel Lists label -->
                <RowDefinition Height="Auto"/>
                <!-- Emoji playlist buttons -->
                <RowDefinition Height="Auto"/>
                <!-- Advanced Controls button -->
                <RowDefinition Height="Auto"/>
                <!-- Channels header -->
                <RowDefinition Height="*"/>
                <!-- Channel list -->
            </Grid.RowDefinitions>

            <!-- Label -->
            <TextBlock Grid.Row="0"
                 Text="Channel Lists:"
                 FontWeight="SemiBold"
                 Margin="0,0,0,8"/>

            <!-- Emoji playlist buttons -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,0,0,10">
                <Button x:Name="PlaylistBtn1" Style="{StaticResource EmojiBtn}" Content="🛕"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Thai playlist"/>
                <Button x:Name="PlaylistBtn2" Style="{StaticResource EmojiBtn}" Content="⭐"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Canada playlist"/>
                <Button x:Name="PlaylistBtn3" Style="{StaticResource EmojiBtn}" Content="📺"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="UK playlist"/>
                <Button x:Name="PlaylistBtn4" Style="{StaticResource EmojiBtn}" Content="🎬"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="US playlist"/>
                <Button x:Name="PlaylistBtn5" Style="{StaticResource EmojiBtn}" Content="🌍"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Ireland playlist"/>
                <Button x:Name="PlaylistBtn6" Style="{StaticResource EmojiBtn}" Content="🧪"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Australia playlist"/>
            </StackPanel>

            <!-- Advanced Controls -->
            <Button Grid.Row="2"
              Content="Advanced Controls"
              Click="OnAdvancedControlsClick"
              Margin="0,0,0,10"/>

            <TextBlock Grid.Row="3"
            x:Name="ChannelHeader"
            Text="Channels"
            Margin="0,0,0,4"
            FontWeight="SemiBold"/>

            <ListView Grid.Row="4"
                x:Name="Samples"
                IsItemClickEnabled="True"
                ItemClick="OnSampleClick"
                ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"
                       FontWeight="SemiBold"
                       TextWrapping="NoWrap"
                       TextTrimming="CharacterEllipsis"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <!-- Right: video + overlays -->
        <Grid x:Name="VideoHost" Grid.Column="1" Background="Black" KeyDown="OnRootKeyDown">

            <!-- Video surface (poster shows until a Source is set) -->
            <MediaPlayerElement x:Name="Player"
                          AreTransportControlsEnabled="False"
                          DoubleTapped="OnVideoDoubleTapped"
                          Stretch="Uniform"
                          PosterSource="ms-appx:///Assets/EmTV-Load.png"/>

            <!-- Idle overlay (shown when a playlist is loaded but nothing is playing) -->
            <Grid x:Name="IdleOverlay"
                    Background="#66000000"
                    Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                    <TextBlock Text="Select a channel to start"
                                Foreground="White" FontSize="18" FontWeight="SemiBold"
                                HorizontalAlignment="Center"/>
                    <TextBlock Text="Pick any item from the channel list on the left."
                        Foreground="#FFE0E0E0" TextAlignment="Center" MaxWidth="520"/>
                </StackPanel>
            </Grid>

            <!-- Loading overlay -->
            <Grid x:Name="LoadingOverlay"
            Background="#CC000000"
            Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                    <ProgressRing IsActive="True" Width="54" Height="54"/>
                    <TextBlock Text="Loading channel…" Foreground="White"
                     FontSize="16" FontWeight="SemiBold"
                     HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <!-- Error overlay (our error UI; replaces built-in banner) -->
            <Grid x:Name="ErrorOverlay"
            Background="#CC1F1F1F"
            Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="10">
                    <TextBlock Text="Playback failed"
                     Foreground="White" FontSize="18" FontWeight="SemiBold"
                     HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ErrorDetail"
                     Text=""
                     Foreground="#FFE0E0E0"
                     TextAlignment="Center"
                     TextWrapping="Wrap"
                     MaxWidth="520"/>
                    <Button Content="Dismiss" Click="OnDismissError"
                  HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <!-- Fullscreen button -->
            <StackPanel Orientation="Horizontal"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Top"
                  Margin="8"
                  Background="#80000000"
                  Padding="6"
                  CornerRadius="8">
                <Button x:Name="FullBtn" Click="OnToggleFullscreen"
                ToolTipService.ToolTip="Fullscreen (F) / Exit (Esc)">
                    <FontIcon x:Name="FullIcon" Glyph="&#xE740;" FontFamily="Segoe MDL2 Assets"/>
                </Button>
            </StackPanel>
        </Grid>

    </Grid>
</Window>


