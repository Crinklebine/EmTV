<Window
    x:Class="EmTV.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="EmTV">

    <Grid x:Name="Root">

        <!-- ✅ Resources belong on a FrameworkElement (Grid), not Window -->
        <Grid.Resources>
            <Style x:Key="EmojiBtn" TargetType="Button">
                <Setter Property="Width" Value="48"/>
                <Setter Property="Height" Value="52"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="CornerRadius" Value="10"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="FontFamily" Value="Segoe UI Emoji"/>
                <Setter Property="FontSize" Value="28"/>
            </Style>
        </Grid.Resources>

        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftCol" Width="360"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left pane with scrolling list -->
        <Grid x:Name="LeftPane" Padding="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- quick play label -->
                <RowDefinition Height="Auto"/>
                <!-- url box -->
                <RowDefinition Height="Auto"/>
                <!-- play/load buttons -->
                <RowDefinition Height="Auto"/>
                <!-- EMOJI PLAYLIST BUTTONS -->
                <RowDefinition Height="Auto"/>
                <!-- "Channels" header -->
                <RowDefinition Height="*"/>
                <!-- LISTVIEW fills & scrolls -->
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Quick play URL" FontWeight="SemiBold"/>
            <TextBox  Grid.Row="1" x:Name="UrlBox" PlaceholderText="https://...m3u8"/>

            <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8">
                <Button Content="Play" Click="OnPlayClick"/>
                <Button Content="Load .m3u" Click="OnLoadM3U"/>
            </StackPanel>

            <!-- 6 emoji playlist buttons (use the style) -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" Spacing="8" Margin="0,10,0,0">
                <Button x:Name="PlaylistBtn1" Style="{StaticResource EmojiBtn}" Content="🇹🇭"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Thai playlist"/>
                <Button x:Name="PlaylistBtn2" Style="{StaticResource EmojiBtn}" Content="⭐"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Playlist 2"/>
                <Button x:Name="PlaylistBtn3" Style="{StaticResource EmojiBtn}" Content="📺"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Playlist 3"/>
                <Button x:Name="PlaylistBtn4" Style="{StaticResource EmojiBtn}" Content="🎬"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Playlist 4"/>
                <Button x:Name="PlaylistBtn5" Style="{StaticResource EmojiBtn}" Content="🌍"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Playlist 5"/>
                <Button x:Name="PlaylistBtn6" Style="{StaticResource EmojiBtn}" Content="🧪"
                Click="OnPlaylistButtonClick" ToolTipService.ToolTip="Playlist 6"/>
            </StackPanel>

            <TextBlock Grid.Row="4" Text="Channels" Margin="0,16,0,4" FontWeight="SemiBold"/>

            <ListView Grid.Row="5"
                x:Name="Samples"
                IsItemClickEnabled="True"
                ItemClick="OnSampleClick"
                ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"
                       FontWeight="SemiBold"
                       TextWrapping="NoWrap"
                       TextTrimming="CharacterEllipsis"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <!-- Right: video + overlay controls -->
        <Grid x:Name="VideoHost" Grid.Column="1" Background="Black" KeyDown="OnRootKeyDown">
            <MediaPlayerElement x:Name="Player"
                          AreTransportControlsEnabled="True"
                          DoubleTapped="OnVideoDoubleTapped"/>
            <StackPanel Orientation="Horizontal"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Top"
                  Margin="8"
                  Background="#80000000"
                  Padding="6"
                  CornerRadius="8">
                <Button x:Name="FullBtn" Click="OnToggleFullscreen"
                ToolTipService.ToolTip="Fullscreen (F) / Exit (Esc)">
                    <FontIcon x:Name="FullIcon" Glyph="&#xE740;" FontFamily="Segoe MDL2 Assets"/>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
